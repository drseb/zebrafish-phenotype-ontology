# Curation pipeline

The purpose of the curation pipeline is to handle the automatic generation of DOSDP instances (and therefore OWL) from ZFIN EQ annotations. It contains the following components:

- zp.annotation_to_id_map.py: This takes the original ZP identifier assignments that were created using the [old pipeline](https://github.com/obophenotype/zebrafish-phenotype-ontology-build) and transforms them into the initial version of the id_map.tsv. This file contains the stable and permanent mapping of newly created ZP identifiers to ZFIN EQ annotations. It also applies a number of filtering steps and excludes a few ambiguous ZP id assignments. More documentation in-line (python). **After the initial version of the zebrafish phenotype ontology is passed, this file should not be run again!**
- zp_generate_stable_identifiers.py: This script takes the current ZFIN EQ annotations and assigns unique ZP identifiers to ones that do not have one yet. As a result, the ZP id_map.tsv is updated. Note that a second file with deprecated EQ annotations is generated as well; **However, these deprecated classes are NOT excluded from the main id_map.** The assumption is, that even if an EQ disappears from the ZFIN EQ data, it is still a valid statement that could be referred to.
- zp_dosdp.py: This scripts takes the current id map and assigns ZP ids to one of the ZFIN default patterns and **exports formatted DOSDP TSV files**. ZFIN default patterns are stored in ../patterns/dosdp-patterns. 
- zp_extract_upheno.py: This script takes a single TSV file in tries to determine which upheno pattern would be a good fit. The TSV file is then split into the default and any upheno pattern that could be matched to it. **It is expected that this file will be developed and extended for a while to come**
- zp_kb.py: This script takes in the ZFIN EQ to GENE mappings and generates a little RDF knowledge graph from them referencing the precomposed ZP classes. This file can be used to affectively query and group annotations related to phenotype, for example: Find all annotations pertaining to morphological abnormalities of any anatomical part.
